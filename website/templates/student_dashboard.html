<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="nav">
        <h2>MedReport Verifier</h2>
        <ul class="nav-links">
            <li><a href="{{ url_for('views.upload') }}">Upload MC</a></li>
            <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
        </ul>
    </div>

    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      
      {% if category == 'success' %}
        <div style="padding: 15px; margin-bottom: 20px; border-radius: 8px; text-align: center; font-weight: bold; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;">
          {{ message }}
        </div>
      {% else %}
        <div style="padding: 15px; margin-bottom: 20px; border-radius: 8px; text-align: center; font-weight: bold; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;">
          {{ message }}
        </div>
      {% endif %}

    {% endfor %}
  {% endif %}
{% endwith %}

        <h1>Welcome, {{ current_user.name }}</h1>
        
        <div class="box wide">
            <table>
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>MC Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% if records %}
                        {% for record in records %}
                        <tr>
                            <td>{{ record.subject_name }}</td>
                            <td>{{ record.issue_date }}</td>
                            <td>
                                {% if record.status == 'Valid' %}
                                    <span style="background: #2ecc71; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">Valid</span>
                                {% elif record.status == 'Rejected' %}
                                    <span style="background: #e74c3c; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">Rejected</span>
                                {% elif record.status == 'Flagged' %}
                                    <span style="background: #f39c12; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">Flagged</span>
                                {% else %}
                                    <span style="background: #3498db; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">Pending</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="3" style="text-align: center; padding: 40px; color: #888;">
                                No submissions yet. <br>
                                <a href="{{ url_for('views.upload') }}" style="color: #2980b9; font-weight: bold;">Upload your first MC here</a>
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>